<%- include("../partials/header") %>

    <div class="container mt-5">
        <div class="text-center mb-4">
            <h2 class="fw-bold text-primary-emphasis">üì¨ Adoption Requests</h2>
            <p class="text-muted">Manage and review all incoming adoption interest submissions below.</p>
        </div>

        <% if (requests.length===0) { %>
            <div class="alert alert-info text-center shadow-sm">
                No adoption requests yet. üêæ
            </div>
            <% } else { %>
                <div class="card shadow-lg border-0">
                    <div class="card-header bg-primary text-white fw-semibold fs-5">
                        List of Adoption Requests
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle m-0">
                                <thead class="table-light text-center">
                                    <tr>
                                        <th>Animal</th>
                                        <th>Adopter Name</th>
                                        <th>Phone</th>
                                        <th>Message</th>
                                        <th>Submitted At</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% requests.forEach(r=> { %>
                                        <tr class="text-center">
                                            <td>
                                                <% if (r.animalId) { %>
                                                    <img src="<%= r.animalId.afterPhotoUrl %>"
                                                        class="img-thumbnail rounded"
                                                        style="width: 100px; height: auto;">
                                                    <div class="text-muted small mt-1">‚Çπ<%= r.animalId.adoptionFee %>
                                                    </div>
                                                    <% } else { %>
                                                        <em class="text-danger">Animal deleted</em>
                                                        <% } %>
                                            </td>
                                            <td>
                                                <%= r.name %>
                                            </td>
                                            <td>
                                                <%= r.phone %>
                                            </td>
                                            <td>
                                                <%= r.message %>
                                            </td>
                                            <td>
                                                <%= r.createdAt.toLocaleString("en-IN") %>
                                            </td>
                                            <td>
                                                <form action="/ngo/adoptions/<%= r._id %>?_method=DELETE" method="POST"
                                                    onsubmit="return confirm('Are you sure you want to delete this request?');">
                                                    <button class="btn btn-outline-danger btn-sm px-3">
                                                        <i class="bi bi-trash3"></i> Delete
                                                    </button>
                                                </form>
                                            </td>
                                        </tr>
                                        <% }) %>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <% } %>
    </div>

    <%- include("../partials/footer") %>